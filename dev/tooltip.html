<!doctype html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="css/fly.css">
	</head>
	<body>
		<h1>
			Confirmation pop
		</h1>

		<div class="fy-tt" id="tt" fly-tt-w="1">
			<p>
				borra comentario
			</p>
			<button class="fy-btn -s" fly-tt-c>Yes</button>
			<button class="fy-btn -s" fly-tt-c>No</button>
		</div>

		<p>
			Lorem ipsum dolor sit amet, consectetur adipisicing elit. Tempore eum quisquam ratione ipsum eos vitae, qui, illum natus laborum aperiam, 
			Lorem ipsum dolor sit amet, consectetur adipisicing elit. Tempore eum quisquam ratione ipsum eos vitae, qui, illum natus laborum aperiam, 
			Lorem ipsum dolor sit amet, consectetur adipisicing elit. Tempore eum quisquam ratione ipsum eos vitae, qui, illum natus laborum aperiam, 
			Lorem ipsum dolor sit amet, consectetur adipisicing elit. Tempore eum quisquam ratione ipsum eos vitae, qui, illum natus laborum aperiam, 
			Lorem ipsum dolor sit amet, consectetur adipisicing elit. Tempore eum quisquam ratione ipsum eos vitae, qui, illum natus laborum aperiam, 
			Lorem ipsum dolor sit amet, consectetur adipisicing elit. Tempore eum quisquam ratione ipsum eos vitae, qui, illum natus laborum aperiam,  <a href="" class="" id="lol" fly-tt-o="1">opentool</a> dignissimos similique iure praesentium repudiandae ipsa! Minus enim saepe iusto.
		</p>
		


	<script>

		(function(){

			function Tooltip(btn) {
				this.btn = btn;
				this.closes;
				this.tooltipId;
				this.tooltip;
				this.getTooltipId();
				this.getTooltip();
				this.getClose();
				this.bindClick();
				this.open = false;
				// this.log();
			}

			Tooltip.prototype.getTooltipId = function(){
				this.tooltipId = this.btn.getAttribute('fly-tt-o');
			}

			Tooltip.prototype.getTooltip = function(){
				this.tooltip = document.querySelectorAll('[fly-tt-w="'+this.tooltipId+'"]')[0];
			}
			Tooltip.prototype.getClose = function(){
				this.closes = this.tooltip.querySelectorAll('[fly-tt-c]');
				for (var i = this.closes.length - 1; i >= 0; i--) {
					var c = this.closes[i]
					c.addEventListener('click', function(e){
						e.preventDefault()
						this.off();
					}.bind(this));
				}
			}

			Tooltip.prototype.bindClick = function(){
				this.btn.addEventListener('click', function(e){
					e.preventDefault();
					this.handleClick();
				}.bind(this));
			}

			Tooltip.prototype.handleClick = function(){
				this.open == false?this.on():this.off();
			}

			Tooltip.prototype.off = function(){
				this.tooltip.style.display = 'none';
				this.open = false;
			}

			Tooltip.prototype.on = function(){
				this.tooltip.style.display = 'block';
				this.getCoords(); // tooltip should be visible first
				this.open = true;
			}	


			Tooltip.prototype.getCoords = function() {
				var rect = this.btn.getBoundingClientRect();
				var innerWidth = window.innerWidth;
				var tooltipWidth = this.tooltip.offsetWidth;
				var tooltipHeight = this.tooltip.offsetHeight;
				var left = rect.left - (tooltipWidth*0.3);
				if (left < 0) {
					left = 5;
				}
				var top = rect.top-tooltipHeight;

				if ((left+tooltipWidth)>innerWidth) {
					left = innerWidth - tooltipWidth - 5;
				}
				this.tooltip.style.left = left+'px';
				this.tooltip.style.top = top+'px';

			}

			var e = document.querySelectorAll('[fly-tt-o]');
			for(var i = 0; i < e.length; i++ ) {
				new Tooltip(e[i]);
			}


		}());


		// var lol = document.getElementById('lol');
		// var rect = lol.getBoundingClientRect()
		// console.log(rect.top,rect.bottom,rect.left,rect.right)

		// var hw = window.innerWidth;
		// console.log("hw",hw);

		// var tt = document.getElementById('tt');
		// var hh = tt.offsetHeight;
		// var ww = tt.offsetWidth;
		// console.log("hh,ww",hh,ww);

		// var nt = (rect.top-hh);;
		// var nl = rect.left;
		// console.log(nl+ww);
		// if ((nl+ww) > hw) {
		// 	nl = hw - ww-20;
		// }
		// console.log("news",nt,nl);
		// tt.style.top = nt+'px';
		// tt.style.left = nl+'px';




	</script>
	
		
	</body>
</html>
























